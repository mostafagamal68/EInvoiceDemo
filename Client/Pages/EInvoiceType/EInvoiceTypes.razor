@page "/EInvoiceTypes"
@inherits GeneralComponent
@inject IEInvoiceTypesService service
@* <PageTitle>EInvoice Types</PageTitle> *@

<h3>EInvoice Types</h3>
<a role="button" class="btn btn-primary" @onclick="@(()=>GoTo("EInvoiceType", "E-Invoice Type", true))"><i class="bi bi-plus-circle mx-1"></i>Add</a>

@* @if (!Layout.IsLoading)
{ *@
    @if (eInvoiceTypes?.Items.Count() == 0)
    {
        <div class="d-flex alert alert-warning align-items-center">
            <h5>No Subscriptions</h5>
        </div>
    }
    else
    {
        <TableTemplate Items="eInvoiceTypes?.Items" Context="sub" class="table table-striped table-hover">
            <TableHeader>
                <th scope="col" class="border-end text-center" style="border-top-left-radius:20px">#</th>
                <th scope="col" class="border-end">Name</th>
                <th style="border-top-right-radius:20px">Actions</th>
            </TableHeader>
            <RowTemplate>
                <td scope="row" class="border-end text-center" style=@(sub.Item2 == sub.Item3 ? "border-bottom-left-radius:20px" : "")>@sub.Item2</td>
                <td class="border-end">@sub.Item1.EInvoiceTypeName</td>
                <td style=@(sub.Item2 == sub.Item3 ? "border-bottom-right-radius:20px" : "")>
                <button class="btn" type="button" @onclick="@(() => GoTo("EInvoiceType", "EInvoice Type", true, sub.Item1.EInvoiceTypeId))">
                        <i class="bi bi-pencil-square"></i>
                    </button>
                </td>
            </RowTemplate>
        </TableTemplate>
    }

    <Paginator Type="EInvoiceTypesFilter" Filter="eInvoiceTypes" Pagination="eInvoiceTypes?.Pagination" GetPage="GetEInvoiceTypesFiltered"></Paginator>
@* } *@
@code {
    public EInvoiceTypesFilter? eInvoiceTypes = new();
    protected override async Task OnInitializedAsync()
    {
        // Layout.ToggleLoader();
        // Layout.SetTitle();
        await GetEInvoiceTypesFiltered();
        // Layout.ToggleLoader();
    }
    public async Task GetEInvoiceTypesFiltered() => eInvoiceTypes = await service.GetList(eInvoiceTypes);
}
